<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Configuration Studies</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<!-- html,3,sec-filename --> 
<meta name="src" content="sched.tex"> 
<meta name="date" content="2018-09-17 11:11:00"> 
<link rel="stylesheet" type="text/css" href="sched.css"> 
</head><body 
>
<!--l. 4406--><div class="crosslinks"><p class="noindent">[<a 
href="labelSECSATELSatelliteTracking.html" >next</a>] [<a 
href="labelSECSPECIALVLBASingleDishVLBAObserving.html" >prev</a>] [<a 
href="labelSECSPECIALVLBASingleDishVLBAObserving.html#taillabelSECSPECIALVLBASingleDishVLBAObserving.html" >prev-tail</a>] [<a 
href="#taillabelSECCONFIGConfigurationStudies.html">tail</a>] [<a 
href="labelCHPADVICEINFORMATIONANDADVICEONSPECIFICTOPICS.html#labelSECCONFIGConfigurationStudies.html" >up</a>] </p></div>
<h3 class="sectionHead"><span class="titlemark">2.12   </span> <a 
 id="x23-410002.12"></a>Configuration Studies</h3>
<!--l. 4408--><p class="noindent" ><span 
class="cmcsc-10">SCHED</span><span 
class="cmcsc-10">&#x00A0;</span>has capabilities, added in 2002, that are useful in array configuration studies. These are tied
to the <a 
href="labelSECPLOTPlotting.html#x10-110001.5">plotting</a> capabilities. If <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1410003.1.2"><span 
class="cmtt-10">OBSTYPE = CONFIG</span></a> is specified and a UV plot is requested from the
interactive plotting menu with more than one requested source, a map of the station locations is plotted
first. It is possible to adjust station selection by clicking on this map, and it is even possible to move
stations. Also, the station selection can be used to set up a configuration optimization that
uses, as a quality measure, some statistic about the sampled cells in a grid. Alternatively, a
contour plot of the quality measure around a selected station can be made. The effect of
multifrequency synthesis can be examined with the help of the <a 
href="labelSECSCHPARTheScheduleFile.html#x26-2150003.1.2"><span 
class="cmtt-10">UVMFS</span></a> parameter. This all makes
for a rather interactive way of examining possible configurations. The style is much like
that used for the VLBA configuration search, but is far more modern and interactive. The
optimizer is fast enough that a 1.8 GHz Pentium IV under Linux, optimizing arrays of 20
stations using 12 hour tracks of 10 minute scans on 4 sources can process over 50 different
configurations per second. To describe the capabilities, the steps involved in using them will be
described.
<!--l. 4431--><p class="noindent" >First, start with a planning type schedule such as is described in the <a 
href="labelSECPLANNINGUsingSCHEDforProjectPlanning.html#x12-140002.1">schedule planning
section</a>. The scan characteristics can be adjusted at will. The examples are good for &#8220;hunt and
peck&#8221; configuration examinations. For the optimizer, which looks at the uv points at the
beginning and end of scans, it is useful to use something like <a 
href="labelSECSCHPARTheScheduleFile.html#x26-870003.1.2"><span 
class="cmtt-10">DUR = 10:00</span></a> and <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1020003.1.2"><span 
class="cmtt-10">GAP = 10:00</span></a> to
evenly space these points. Recall that setting the frequency to 0.3 MHz (the default for uv
plots when no setup is given) gives a one kilometer wavelength so the UV coverage is in
km.
<!--l. 4443--><p class="noindent" >There are two ways to look at alternative arrays. One is to specify a lot of stations up to
the maximum that <span 
class="cmcsc-10">SCHED</span><span 
class="cmcsc-10">&#x00A0;</span>will accept. Then the ones to include in the uv plots can be
selected from the sources menu or interactively from the map. This allows rapid trials of many
options. As and alternative, or in addition, any station can be moved interactively. Note that
you can use <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1600003.1.2"><span 
class="cmtt-10">OPTMODE=UPTIME</span></a> to get continuous tracks on each source, or you can give an
actual schedule. The author has found it useful to invoke two instances of <span 
class="cmcsc-10">SCHED</span><span 
class="cmcsc-10">&#x00A0;</span>and
carefully align the plot windows (most easily by expanding them to full screen). Then the
window manager can be used to blink back and forth to see differences easily. Of course,
selecting the station of interest to highlight (plot uv points in red) helps distinguish differences
too.
<!--l. 4458--><p class="noindent" >Note that, you can adjust the maximum number of stations by setting the FORTRAN parameters
<span 
class="cmtt-10">MAXSTA </span>in <span 
class="cmsl-10">sched.inc</span>, and <span 
class="cmtt-10">PSTMAX </span>in <span 
class="cmsl-10">plot.inc</span>. You might also have to increase <span 
class="cmtt-10">MK </span>in <span 
class="cmsl-10">schin.f </span>to increase
the allowed number of input parameters. If you just change <span 
class="cmtt-10">MAXSTA</span>, <span 
class="cmcsc-10">SCHED</span><span 
class="cmcsc-10">&#x00A0;</span>should complain
about other changes that are needed. Be warned that, as these parameters are increased,
the size of <span 
class="cmcsc-10">SCHED</span><span 
class="cmcsc-10">&#x00A0;</span>increases significantly since they affect several 2D arrays with <span 
class="cmtt-10">MCHAN</span>,
which is rather large, on the other axis. Average users are not expected to do this sort of
thing, but if you are doing serious configuration studies, you are probably not an average
user.
<!--l. 4470--><p class="noindent" >The latitude and longitude range to set for the map should be set using <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1330003.1.2"><span 
class="cmtt-10">MAPLIM</span></a>. <span 
class="cmcsc-10">SCHED</span><span 
class="cmcsc-10">&#x00A0;</span>will examine
these ranges and look for vector files that provide useful geographic information. If the region is large,
country and ocean boundaries are plotted. If the US is included, state boundaries are also plotted.
Finally, if New Mexico is of significant size, the roads in New Mexico will be plotted (this facility is
                                                                                
                                                                                
being used for New Mexico Array - a part of the EVLA - configuration studies). For now, the
map file names are hardwired to be <span 
class="cmsl-10">$PLANET</span><span 
class="cmsl-10">_DATA/wdbtemp4.e00 </span>for the world map,
<span 
class="cmsl-10">$PLANET</span><span 
class="cmsl-10">_DATA/states.e00 </span>for the US states map, and <span 
class="cmsl-10">$PLANET</span><span 
class="cmsl-10">_DATA/tra0003-2.dat </span>for the NM
roads map. <span 
class="cmsl-10">$PLANET</span><span 
class="cmsl-10">_DATA </span>is an environment variable used locally to point to the directory where
the planetary ephemeris is kept. The maps will not be distributed with <span 
class="cmcsc-10">SCHED</span><span 
class="cmcsc-10">&#x00A0;</span>(they are much
larger than all the rest of <span 
class="cmcsc-10">SCHED</span><span 
class="cmcsc-10">&#x00A0;</span>put together), but can be made available to interested
users.
<!--l. 4488--><p class="noindent" >Start <span 
class="cmcsc-10">SCHED</span><span 
class="cmcsc-10">&#x00A0;</span>in the manner for plotting (specify <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1730003.1.2"><span 
class="cmtt-10">PLOT</span></a> and the schedule file). Once the menu comes
up, set various things. Under Options, it is useful to decrease the default line widths. Under AXIS,
select UV Plot and set the desired scale. It is useful to reverse the signs of the X axis so that
the UV tracks can be easily associated with stations on the map. Under files, select <span 
class="cmtt-10">Both</span>
<span 
class="cmtt-10">stations selected </span>so that any unselected stations are left out of the plot. Also select the
sources you wish to use. I have defined several sources at different declinations and at ra=0
for these studies and like to use the ones at 44, 18, -6 and -30 degrees as a representative
sample. Then it is a good idea to save all this in a parameter file from the FILES page. On
the next run, loading that parameter file can save all the other setups. Finally, click on
PLOT.
<!--l. 4503--><p class="noindent" >At this point, a map will appear with selected stations in blue or red and unselected stations in yellow
or yellow with a red central dot. You can right click on the map and the uv coverage for your sources
will be plotted. You can drag the corners of the pgplot window to make it larger, if you wish, or let the
window manager expand it to full screen. The next plot (click <span 
class="cmtt-10">PLOT </span>again) will then be larger.
In the uv plots, any baseline involving a highlighted (red) station will be plotted in red.
Others will be plotted in blue. Left clicking on the map will toggle the selection status of
the nearest station to the cursor. Middle clicking on the map will flag the nearest station
to be moved. The next left click (maybe others too) will put that station at the cursor
position. Note that you cannot return a station to its original position without restarting
the program. Once a station has been moved, its symbol will be surrounded by a green
ring and, in the station list printed with the uv plots (right click), the position will be in
green. Checking configurations involves clicking stations on and off and running the uv
plots.
<!--l. 4521--><p class="noindent" >The map can be zoomed in and out with <span 
class="cmtt-10">&#8217;Z&#8217; </span>and <span 
class="cmtt-10">&#8217;z&#8217; </span>respectively. The zoomed image will be centered
at the location of the cursor when the letter was typed. The zoom out is by a factor of 1.5, in by a
factor of 1.0/1.5.
<!--l. 4526--><p class="noindent" >The optimizer is triggered by typing the letter <span 
class="cmtt-10">O </span>(not case sensitive) while the cursor is on the map.
What it does is count all the highlighted stations, then it tries all combinations of that many
stations, choosing from all stations shown either in red or yellow with a red dot. Thus you
can use the toggle operation to select that stations that will be tried with the optimizer.
Be warned that the number of arrays to try can get very large if you try to optimize too
many stations at once. <span 
class="cmcsc-10">SCHED</span><span 
class="cmcsc-10">&#x00A0;</span>will inform the user of the number it plans to try and then
tells about its progress so he/she can decide whether to wait and watch, go get a cup of
coffee, go to bed, or abort the process (kill the job - I suppose some day this should be made
friendlier).
<!--l. 4539--><p class="noindent" >The optimizer calculates a quality measure for each array and ranks the resulting arrays accordingly.
The quality measure is based on statistics of sampled cells in a special grid. There are two options, one
is to simply count the number of sampled cells. The other is to look at the rms scatter of the number of
samples per cell. Other quality measure options could be added without a lot of trouble. Some details
are written to the <span 
class="cmsl-10">nnnn.opt </span>file (<span 
class="cmsl-10">nnnn </span>is the project code), including the results for the top 200
arrays.
<!--l. 4548--><p class="noindent" >The optimizing grid is a polar with a radial cell size that scales with the root sum of the radius squared
plus a constant squared. If the constant is small, this ends up scaling with radius (a logarithmic grid)
which is useful for large arrays that cannot be reconfigured to adjust the resolution. For a large
                                                                                
                                                                                
constant, the cells are evenly spaced in radius, which places more importance on the longer spacings.
With an intermediate constant (the constant is in the units of the UV plot), the cells have even spacing
in the middle and go toward scaling with radius on the outside. This has been found to be the most
useful case, which is why this complexity is included. If the constant is too small, arrays that are
excessively centrally condensed are generated. If too large, there can be poor short spacing
coverage. You will need to experiment with the values. Also, you will need to experiment
with the number of cells to use in the radial and azimuthal directions. If the cells are too
small, you will not distinguish between arrays very well (each track is effectively isolated). If
too large, all arrays will fill most or all cells so again this will not be a good test. After an
optimization, there will be a faint representation of the grid plotted under the UV coverage
plots.
<!--l. 4568--><p class="noindent" >The parameters of the grid are set with <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1190003.1.2"><span 
class="cmtt-10">GRIDNR</span></a> (the number of radial cells), <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1200003.1.2"><span 
class="cmtt-10">GRIDNT</span></a> (the number of
azimuthal cells), <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1160003.1.2"><span 
class="cmtt-10">GRIDMIN</span></a> (the inner radius of the grid), <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1170003.1.2"><span 
class="cmtt-10">GRIDMAX</span></a> (the outer radius of the grid - which
can bias the resulting size of the array), <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1230003.1.2"><span 
class="cmtt-10">GRIDW0</span></a> (the constant discussed above), <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1180003.1.2"><span 
class="cmtt-10">GRIDMEAS</span></a> (select the
quality measure), <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1210003.1.2"><span 
class="cmtt-10">GRIDSTEP</span></a> (select the spacing of latitude and longitude points calculated for making
the contour plot of quality &#8212; see below), and <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1220003.1.2"><span 
class="cmtt-10">GRIDVLA</span></a> (restrict the quality measure calculation to only
baselines involving a VLA station).
<!--l. 4586--><p class="noindent" >In addition to optimization, <span 
class="cmcsc-10">SCHED</span><span 
class="cmcsc-10">&#x00A0;</span>can plot contours of the quality measure around a selected
station. To invoke this, toggle the station selections until only one is red (if more are red, only one will
be used), then type <span 
class="cmtt-10">S</span>. Sched will calculate the quality measure with the selected station at
points on a latitude and longitude grid, spaced by <a 
href="labelSECSCHPARTheScheduleFile.html#x26-1210003.1.2"><span 
class="cmtt-10">GRIDSTEP</span></a> arc minutes, and then present a
contour plot of the results. This can be useful for finding directions to move a station to
improve coverage and for finding the area over which a station can be moved to account
for logistical considerations. The contours will remain until the map is replotted, so if you
repeat the process, multiple versions can end up on the plot. On replot, the contours will be
replotted unless some other action, like station selection or moving, has been taken. This allows
hard copies including the contours invoked from the files menu to be made for printing or
whatever.
<!--l. 4603--><p class="noindent" >When the station map first appears, it is in full screen mode. But when you right click to get the uv
plots, it is replotted in one of the panels.
<!--l. 4607--><p class="noindent" >If one clicks <span 
class="cmtt-10">&#8217;K&#8217; </span>on the map, two postscript files are produced that are useful for VLA
centered SKA configuration studies. These are highly specific outputs with many parameters
hardwired, so they are not expected to be useful to the general user. Someday, they may be
generalized.
<!--l. 4613--><p class="noindent" >Note that it would not be hard for a user willing to do a bit of FORTRAN programming to cause other
maps to be plotted or to add other optimization quality measures. If you want to do so, please let Craig
Walker know (cwalker@nrao.edu) so we can integrate a way to choose the modes and input parameters
and keep from having multiple versions of <span 
class="cmcsc-10">SCHED</span>. It is also just a matter of changing a few parameter
statements to increase the number of allowed stations. This is kept down for the released
version of <span 
class="cmcsc-10">SCHED</span><span 
class="cmcsc-10">&#x00A0;</span>because that dimension is combined with other large ones, like the
maximum number of scans, to set the size of some arrays and not everyone has huge memory
computers.
<!--l. 4624--><p class="noindent" >These facilities were added by Craig Walker in early 2002. Putting them in <span 
class="cmcsc-10">SCHED</span><span 
class="cmcsc-10">&#x00A0;</span>was the easiest
way to obtain facilities long wanted for UV studies. This scheme for UV optimization is especially
useful for arrays of relatively small numbers of antennas with strong geographic constraints, as opposed
to large arrays laid out on an open plain.
                                                                                
                                                                                
<!--l. 4631--><div class="crosslinks"><p class="noindent">[<a 
href="labelSECSATELSatelliteTracking.html" >next</a>] [<a 
href="labelSECSPECIALVLBASingleDishVLBAObserving.html" >prev</a>] [<a 
href="labelSECSPECIALVLBASingleDishVLBAObserving.html#taillabelSECSPECIALVLBASingleDishVLBAObserving.html" >prev-tail</a>] [<a 
href="labelSECCONFIGConfigurationStudies.html" >front</a>] [<a 
href="labelCHPADVICEINFORMATIONANDADVICEONSPECIFICTOPICS.html#labelSECCONFIGConfigurationStudies.html" >up</a>] </p></div>
<!--l. 4631--><p class="noindent" ><a 
 id="taillabelSECCONFIGConfigurationStudies.html"></a>  
</body></html> 
